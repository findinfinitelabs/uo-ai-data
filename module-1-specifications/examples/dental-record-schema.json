{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Dental Record Schema",
  "description": "Schema for synthetic dental examination records",
  "type": "object",
  "required": ["patient_id", "visit_date", "examination"],
  "properties": {
    "patient_id": {
      "type": "string",
      "description": "Anonymized unique patient identifier",
      "pattern": "^P[0-9]{8}$",
      "example": "P00001234"
    },
    "visit_id": {
      "type": "string",
      "description": "Unique visit identifier",
      "pattern": "^V[0-9]{10}$"
    },
    "visit_date": {
      "type": "string",
      "format": "date",
      "description": "Date of dental visit"
    },
    "provider_id": {
      "type": "string",
      "description": "Anonymized dentist identifier",
      "pattern": "^D[0-9]{6}$"
    },
    "examination": {
      "type": "object",
      "properties": {
        "chief_complaint": {
          "type": "string",
          "description": "Patient's main concern or reason for visit"
        },
        "teeth_assessment": {
          "type": "array",
          "description": "Individual tooth assessments",
          "items": {
            "type": "object",
            "required": ["tooth_number", "condition"],
            "properties": {
              "tooth_number": {
                "type": "integer",
                "minimum": 1,
                "maximum": 32,
                "description": "Universal Numbering System (1-32)"
              },
              "surface": {
                "type": "string",
                "enum": ["occlusal", "mesial", "distal", "buccal", "lingual", "incisal"],
                "description": "Tooth surface"
              },
              "condition": {
                "type": "string",
                "enum": [
                  "healthy",
                  "caries",
                  "filling",
                  "crown",
                  "bridge",
                  "implant",
                  "missing",
                  "root_canal",
                  "crack",
                  "chip",
                  "abscess"
                ],
                "description": "Tooth condition"
              },
              "notes": {
                "type": "string",
                "description": "Additional notes about tooth condition"
              }
            }
          }
        },
        "periodontal_screening": {
          "type": "object",
          "properties": {
            "psr_code": {
              "type": "integer",
              "minimum": 0,
              "maximum": 4,
              "description": "Periodontal Screening and Recording (PSR) code"
            },
            "bleeding_on_probing": {
              "type": "boolean",
              "description": "Whether bleeding occurred during probing"
            },
            "pocket_depths": {
              "type": "array",
              "description": "Periodontal pocket depth measurements (mm)",
              "items": {
                "type": "object",
                "properties": {
                  "tooth_number": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 32
                  },
                  "measurements": {
                    "type": "array",
                    "items": {
                      "type": "number",
                      "minimum": 0,
                      "maximum": 15
                    },
                    "minItems": 6,
                    "maxItems": 6,
                    "description": "Six measurements per tooth"
                  }
                }
              }
            }
          }
        },
        "oral_hygiene_index": {
          "type": "string",
          "enum": ["excellent", "good", "fair", "poor"],
          "description": "Overall oral hygiene assessment"
        }
      }
    },
    "treatment_plan": {
      "type": "array",
      "description": "Recommended treatments",
      "items": {
        "type": "object",
        "required": ["procedure_code", "description"],
        "properties": {
          "procedure_code": {
            "type": "string",
            "description": "CDT (Current Dental Terminology) code",
            "pattern": "^D[0-9]{4}$"
          },
          "description": {
            "type": "string",
            "description": "Procedure description"
          },
          "tooth_number": {
            "type": "integer",
            "minimum": 1,
            "maximum": 32,
            "description": "Tooth number if applicable"
          },
          "priority": {
            "type": "string",
            "enum": ["urgent", "high", "medium", "low"],
            "description": "Treatment priority"
          },
          "estimated_cost": {
            "type": "number",
            "minimum": 0,
            "description": "Estimated cost in USD"
          }
        }
      }
    },
    "procedures_performed": {
      "type": "array",
      "description": "Procedures performed during this visit",
      "items": {
        "type": "object",
        "required": ["procedure_code", "description"],
        "properties": {
          "procedure_code": {
            "type": "string",
            "pattern": "^D[0-9]{4}$"
          },
          "description": {
            "type": "string"
          },
          "tooth_number": {
            "type": "integer",
            "minimum": 1,
            "maximum": 32
          },
          "anesthesia_used": {
            "type": "boolean"
          },
          "notes": {
            "type": "string"
          }
        }
      }
    },
    "imaging": {
      "type": "array",
      "description": "X-rays or other imaging performed",
      "items": {
        "type": "object",
        "properties": {
          "image_type": {
            "type": "string",
            "enum": ["bitewing", "periapical", "panoramic", "cephalometric", "cbct"],
            "description": "Type of dental imaging"
          },
          "image_id": {
            "type": "string",
            "description": "Reference to image file"
          },
          "findings": {
            "type": "string",
            "description": "Radiographic findings"
          }
        }
      }
    },
    "next_appointment": {
      "type": "object",
      "properties": {
        "recommended_date": {
          "type": "string",
          "format": "date",
          "description": "Recommended date for next visit"
        },
        "reason": {
          "type": "string",
          "description": "Reason for next appointment"
        }
      }
    }
  }
}
